{"version":3,"sources":["../../../api/server/controllers/commentController.js"],"names":["util","Util","commentContoller","req","res","commentService","getAllComments","allcomments","length","setSuccess","send","setError","body","email","comment","pest_id","newComment","addComments","createdComment","message","pestid","params","Number","getCommentsId","theComments"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,IAAI,GAAC,IAAIC,iBAAJ,EAAX;;IAEMC,gB;;;;;;;;;;;;oDACuBC,G,EAAIC,G;;;;;;;;uBAENC,2BAAeC,cAAf,E;;;AAAlBC,gBAAAA,W;;AACN,oBAAGA,WAAW,CAACC,MAAZ,GAAqB,CAAxB,EAA0B;AACzBR,kBAAAA,IAAI,CAACS,UAAL,CAAgB,GAAhB,EAAoB,iBAApB,EAAsCF,WAAtC;AACA,iBAFD,MAEK;AACJP,kBAAAA,IAAI,CAACS,UAAL,CAAgB,GAAhB,EAAoB,gBAApB;AACA;;iDACMT,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;AAEPJ,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd;iDACOX,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;;;;;;;;;;;;;;;;;qDAIgBD,G,EAAIC,G;;;;;;oBAExBD,GAAG,CAACS,IAAJ,CAASC,K;;;;;AACZb,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd,EAAkB,sBAAlB;kDACOX,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;oBAEED,GAAG,CAACS,IAAJ,CAASE,O;;;;;AAClBd,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd,EAAkB,wBAAlB;kDACOX,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;oBAEED,GAAG,CAACS,IAAJ,CAASG,O;;;;;AAClBf,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd,EAAkB,uBAAlB;kDACOX,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;AAGFY,gBAAAA,U,GAAWb,GAAG,CAACS,I;;;uBAEOP,2BAAeY,WAAf,CAA2BD,UAA3B,C;;;AAArBE,gBAAAA,c;AACNlB,gBAAAA,IAAI,CAACS,UAAL,CAAgB,GAAhB,EAAoB,YAApB,EAAiCS,cAAjC;kDACOlB,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;AAEPJ,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd,EAAkB,aAAMQ,OAAxB;kDACOnB,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;;;;;;;;;;;;;;;;;qDAIqBD,G,EAAIC,G;;;;;;AAC1BgB,gBAAAA,M,GAAQjB,GAAG,CAACkB,M,CAAZD,M;;oBAEHE,MAAM,CAACF,MAAD,C;;;;;AACTpB,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd,EAAkB,2BAAlB;kDACOX,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;uBAIiBC,2BAAekB,aAAf,CAA6BH,MAA7B,C;;;AAAlBI,gBAAAA,W;;AAEN,oBAAG,CAACA,WAAJ,EAAgB;AACfxB,kBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd,qCAA8CS,MAA9C;AACA,iBAFD,MAEK;AACJpB,kBAAAA,IAAI,CAACS,UAAL,CAAgB,GAAhB,EAAoB,gBAApB,EAAqCe,WAArC;AACA;;kDACMxB,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;AAEPJ,gBAAAA,IAAI,CAACW,QAAL,CAAc,GAAd;kDACOX,IAAI,CAACU,IAAL,CAAUN,GAAV,C;;;;;;;;;;;;;;;;;;;;eAOKF,gB","sourcesContent":["import commentService from '../services/commentService';\r\nimport Util from '../utils/Utils';\r\n\r\nconst util=new Util();\r\n\r\nclass commentContoller{\r\n\tstatic async getAllComments(req,res){\r\n\t\ttry{\r\n\t\t\tconst allcomments=await commentService.getAllComments();\r\n\t\t\tif(allcomments.length > 0){\r\n\t\t\t\tutil.setSuccess(200,'Pests Retrieved',allcomments);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'No pests found');\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async addComments(req,res){\r\n\t\t\r\n\t\tif(!req.body.email){\r\n\t\t\tutil.setError(400,'Please provide email');\r\n\t\t\treturn util.send(res);\r\n        }\r\n        if(!req.body.comment){\r\n\t\t\tutil.setError(400,'Please provide comment');\r\n\t\t\treturn util.send(res);\r\n        }\r\n        if(!req.body.pest_id){\r\n\t\t\tutil.setError(400,'Please provide pestid');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\tconst newComment=req.body;\r\n\t\ttry{\r\n\t\t\tconst createdComment=await commentService.addComments(newComment);\r\n\t\t\tutil.setSuccess(201,'Pest Added',createdComment);\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error.message);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n    }\r\n    \r\n    static async getCommentsId(req,res){\r\n\t\tconst {pestid}=req.params;\r\n\r\n\t\tif(!Number(pestid)){\r\n\t\t\tutil.setError(404,'Please input valid pestid');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst theComments=await commentService.getCommentsId(pestid);\r\n\r\n\t\t\tif(!theComments){\r\n\t\t\t\tutil.setError(404,`cannot find pest with id ${pestid}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Found the Pest',theComments);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n}\r\n\r\nexport default commentContoller;\r\n"],"file":"commentController.js"}