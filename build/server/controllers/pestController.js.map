{"version":3,"sources":["../../../api/server/controllers/pestController.js"],"names":["util","Util","pestController","req","res","pestService","getAllPests","allPests","length","setSuccess","send","setError","console","log","body","name","newPest","addPest","createdPest","message","alteredPest","id","params","Number","updatePest","getAPest","thePest","deletePest","pestToDelete","searchname","searchPest","pestGist","pestgist","data","cat","category","pestlist"],"mappings":"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","sourcesContent":["import pestService from '../services/pestService';\r\nimport Util from '../utils/Utils';\r\n\r\nconst util=new Util();\r\n\r\nclass pestController{\r\n\tstatic async getAllPests(req,res){\r\n\t\ttry{\r\n\t\t\tconst allPests=await pestService.getAllPests();\r\n\t\t\tif(allPests.length > 0){\r\n\t\t\t\tutil.setSuccess(200,'Pests Retrieved',allPests);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'No pests found');\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async addPest(req,res){\r\n\t\tconsole.log(req.body.name);\r\n\t\tif(!req.body.name){\r\n\t\t\tutil.setError(400,'Please provide the pest name');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\tconst newPest=req.body;\r\n\t\ttry{\r\n\t\t\tconst createdPest=await pestService.addPest(newPest);\r\n\t\t\tutil.setSuccess(201,'Pest Added',createdPest);\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error.message);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async updatePest(req,res){\r\n\t\tconst alteredPest=req.body;\r\n\t\tconst {id}=req.params;\r\n\t\tif(!Number(id)){\r\n\t\t\tutil.setError(400,'Please a valid ID');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tconst updatePest=await pestService.updatePest(id,alteredPest);\r\n\t\t\tif(!updatePest){\r\n\t\t\t\tutil.setError(404,`Cannot find pest of id ${id}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Pest Updated',updatePest);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async getAPest(req,res){\r\n\t\tconst {id}=req.params;\r\n\r\n\t\tif(!Number(id)){\r\n\t\t\tutil.setError(404,'Please input valid id');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst thePest=await pestService.getAPest(id);\r\n\r\n\t\t\tif(!thePest){\r\n\t\t\t\tutil.setError(404,`cannot find pest with id ${id}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Found the Pest',thePest);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async deteledPest(req,res){\r\n\t\tconst {id}=req.params;\r\n\r\n\t\tif(!Number(id)){\r\n\t\t\tutil.setError(400,'Please provide a valid id');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst pestToDelete=await pestService.deletePest(id);\r\n\r\n\t\t\tif(pestToDelete){\r\n\t\t\t\tutil.setSuccess(200,'Pest Deleted');\r\n\t\t\t}else{\r\n\t\t\t\tutil.setError(404,`Pest with id ${id} cannot be deleted`);\r\n\t\t\t}\r\n\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t\t\t\t\r\n\t}\r\n\r\n\tstatic async searchPest(req,res){\r\n\t\tconst searchname=req.body.searchname;\r\n\t\t// console.log(`this is the search query ${searchname}`);\r\n\t\t\r\n\t\tif(searchname===\"\"){\r\n\t\t\tutil.setError(404,'Please input valid name of scientificName');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst thePest=await pestService.searchPest(searchname);\r\n\r\n\t\t\tif(!thePest){\r\n\t\t\t\tutil.setError(404,`cannot find the term ${searchname}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Found the Pest',thePest);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async pestGist(req,res){\r\n\r\n\t\ttry{\r\n\t\t\tconst pestgist=await pestService.pestGist();\r\n\t\t\tif(pestgist.length > 0){\r\n\t\t\t\tutil.setSuccess(200,'Pests Retrieved',pestgist);\r\n\t\t\t\treq.data=pestgist;\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'No pests found');\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t\t\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tstatic async category(req,res){\r\n\t\t// const category=req.body.category;\r\n\t\tconst {cat}=req.params;\r\n\t\t// console.log(`this is the search query ${searchname}`);\r\n\t\tif(cat===\"\"){\r\n\t\t\tutil.setError(404,'Please input valid category');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tconst pestlist=await pestService.category(cat);\r\n\t\t\t\r\n\t\t\tif(pestlist.length > 0){\r\n\t\t\t\tutil.setSuccess(200,'Pests Retrieved',pestlist);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'No pests found');\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default pestController;\r\n"],"file":"pestController.js"}