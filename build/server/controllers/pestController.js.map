{"version":3,"sources":["../../../api/server/controllers/pestController.js"],"names":["util","Util","pestController","req","res","pestService","getAllPests","allPests","length","setSuccess","send","setError","console","log","body","name","newPest","addPest","createdPest","message","alteredPest","id","params","Number","updatePest","getAPest","thePest","deletePest","pestToDelete","searchname","searchPest","next","pestGist","pestgist","data"],"mappings":"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","sourcesContent":["import pestService from '../services/pestService';\r\nimport Util from '../utils/Utils';\r\n\r\nconst util=new Util();\r\n\r\nclass pestController{\r\n\tstatic async getAllPests(req,res){\r\n\t\ttry{\r\n\t\t\tconst allPests=await pestService.getAllPests();\r\n\t\t\tif(allPests.length > 0){\r\n\t\t\t\tutil.setSuccess(200,'Pests Retrieved',allPests);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'No pests found');\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async addPest(req,res){\r\n\t\tconsole.log(req.body.name);\r\n\t\tif(!req.body.name){\r\n\t\t\tutil.setError(400,'Please provide the pest name');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\tconst newPest=req.body;\r\n\t\ttry{\r\n\t\t\tconst createdPest=await pestService.addPest(newPest);\r\n\t\t\tutil.setSuccess(201,'Pest Added',createdPest);\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error.message);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async updatePest(req,res){\r\n\t\tconst alteredPest=req.body;\r\n\t\tconst {id}=req.params;\r\n\t\tif(!Number(id)){\r\n\t\t\tutil.setError(400,'Please a valid ID');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tconst updatePest=await pestService.updatePest(id,alteredPest);\r\n\t\t\tif(!updatePest){\r\n\t\t\t\tutil.setError(404,`Cannot find pest of id ${id}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Pest Updated',updatePest);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async getAPest(req,res){\r\n\t\tconst {id}=req.params;\r\n\r\n\t\tif(!Number(id)){\r\n\t\t\tutil.setError(404,'Please input valid id');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst thePest=await pestService.getAPest(id);\r\n\r\n\t\t\tif(!thePest){\r\n\t\t\t\tutil.setError(404,`cannot find pest with id ${id}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Found the Pest',thePest);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async deteledPest(req,res){\r\n\t\tconst {id}=req.params;\r\n\r\n\t\tif(!Number(id)){\r\n\t\t\tutil.setError(400,'Please provide a valid id');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst pestToDelete=await pestService.deletePest(id);\r\n\r\n\t\t\tif(pestToDelete){\r\n\t\t\t\tutil.setSuccess(200,'Pest Deleted');\r\n\t\t\t}else{\r\n\t\t\t\tutil.setError(404,`Pest with id ${id} cannot be deleted`);\r\n\t\t\t}\r\n\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t\t\t\t\r\n\t}\r\n\r\n\tstatic async searchPest(req,res){\r\n\t\tconst searchname=req.body.searchname;\r\n\t\tconsole.log(`this is the search query ${searchname}`);\r\n\t\t\r\n\t\tif(searchname===\"\"){\r\n\t\t\tutil.setError(404,'Please input valid name of scientificName');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tconst thePest=await pestService.searchPest(searchname);\r\n\r\n\t\t\tif(!thePest){\r\n\t\t\t\tutil.setError(404,`cannot find the term ${searchname}`);\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'Found the Pest',thePest);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(404,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async pestGist(req,res,next){\r\n\r\n\t\ttry{\r\n\t\t\tconst pestgist=await pestService.pestGist();\r\n\t\t\tif(pestgist.length > 0){\r\n\t\t\t\tutil.setSuccess(200,'Pests Retrieved',pestgist);\r\n\t\t\t\treq.data=pestgist;\r\n\t\t\t}else{\r\n\t\t\t\tutil.setSuccess(200,'No pests found');\r\n\t\t\t}\r\n\t\t\tutil.send(res);\r\n\t\t\tnext();\r\n\t\t}catch(error){\r\n\t\t\tutil.setError(400,error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nexport default pestController;\r\n"],"file":"pestController.js"}